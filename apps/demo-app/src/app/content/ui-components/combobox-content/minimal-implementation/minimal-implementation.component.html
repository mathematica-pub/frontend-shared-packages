<hsi-ui-combobox>
  @if (countLabel) {
    <hsi-ui-textbox [showSelectedCount]="countLabel">
      <p boxLabel>Select states</p>
      <span class="material-symbols-outlined expand-more" boxIcon>
        expand_more
      </span>
    </hsi-ui-textbox>
  } @else {
    <hsi-ui-textbox [dynamicLabel]="dynamicLabel" [customLabel]="customLabel">
      @if (multiSelect) {
        <p boxLabel>Select states</p>
      } @else {
        <p boxLabel>Select a state</p>
      }
      <span class="material-symbols-outlined expand-more" boxIcon>
        expand_more
      </span>
    </hsi-ui-textbox>
  }
  @if (selectAll || icons) {
    <hsi-ui-listbox
      [isMultiSelect]="multiSelect"
      (valueChanges)="onSelection($event)"
    >
      <hsi-ui-select-all-listbox-option>
        @if (icons) {
          <span class="material-symbols-outlined icon checkbox" selectedIcon>
            check_box
          </span>
        }
        @if (icons) {
          <span unselectedIcon class="material-symbols-outlined icon checkbox">
            check_box_outline_blank
          </span>
        }
        Select all</hsi-ui-select-all-listbox-option
      >
      @for (option of options; track option.id) {
        <hsi-ui-listbox-option>
          @if (icons) {
            <span class="material-symbols-outlined icon checkbox" selectedIcon>
              check_box
            </span>
          }
          @if (icons) {
            <span
              unselectedIcon
              class="material-symbols-outlined icon checkbox"
            >
              check_box_outline_blank
            </span>
          }
          {{ option.displayName }}
        </hsi-ui-listbox-option>
      }
    </hsi-ui-listbox>
  } @else {
    @if (groups) {
      <hsi-ui-listbox
        [isMultiSelect]="multiSelect"
        (valueChanges)="onSelection($event)"
      >
        <hsi-ui-listbox-group>
          <hsi-ui-listbox-label>New England states</hsi-ui-listbox-label>
          <hsi-ui-select-all-listbox-option
            >Select all</hsi-ui-select-all-listbox-option
          >
          @for (option of options; track option.id) {
            <hsi-ui-listbox-option
              >{{ option.displayName }}
            </hsi-ui-listbox-option>
          }
        </hsi-ui-listbox-group>
        <hsi-ui-listbox-group>
          <hsi-ui-listbox-label>Mid-Atlantic states</hsi-ui-listbox-label>
          <hsi-ui-select-all-listbox-option
            >Select all</hsi-ui-select-all-listbox-option
          >
          @for (option of midAtlanticOptions; track option.id) {
            <hsi-ui-listbox-option
              >{{ option.displayName }}
            </hsi-ui-listbox-option>
          }
        </hsi-ui-listbox-group>
      </hsi-ui-listbox>
    } @else {
      <hsi-ui-listbox
        [isMultiSelect]="multiSelect"
        (valueChanges)="onSelection($event)"
      >
        @for (option of options; track option.id) {
          <hsi-ui-listbox-option>
            {{ option.displayName }}
          </hsi-ui-listbox-option>
        }
      </hsi-ui-listbox>
    }
  }
</hsi-ui-combobox>
