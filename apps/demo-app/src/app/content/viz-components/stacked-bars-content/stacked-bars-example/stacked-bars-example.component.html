<div class="stacked-bars-example" *ngIf="vm$ | async as vm; else loading">
  <vic-xy-chart [config]="vm.chartConfig">
    <ng-container svg-elements>
      <svg:g vic-xy-background></svg:g>
      <svg:g vic-x-ordinal-axis [config]="vm.xAxisConfig"></svg:g>
      <svg:g vic-y-quantitative-axis [config]="vm.yAxisConfig"></svg:g>
      <svg:g
        vic-primary-marks-stacked-bars
        [config]="vm.dataConfig"
        vicStackedBarsEvents
        [hoverMoveActions]="hoverMoveActions"
        [clickActions]="clickActions"
        [clickRemoveEvent$]="removeTooltipEvent$"
        (interactionOutput)="updateTooltipForNewOutput($event)"
      >
        <vic-html-tooltip
          [config]="tooltipConfig$ | async"
          [template]="htmlTooltip"
          (backdropClick)="onBackdropClick()"
        ></vic-html-tooltip>
      </svg:g>
    </ng-container>
  </vic-xy-chart>
</div>
<ng-template #loading>Loading...</ng-template>

<ng-template #htmlTooltip>
  @if (interactionOutput$ | async; as interactionOutput) {
    <div
      [style.--color]="interactionOutput.color"
      class="stacked-bars-example-tooltip-container"
    >
      <div class="tooltip-body">
        <p class="tooltip-label category">
          {{ interactionOutput.values.category }}
        </p>
        <p class="tooltip-label category">
          {{ interactionOutput.values.x }}
        </p>
        <div class="values-container">
          <p class="tooltip-label y">
            <span class="value-label">Value</span>
            {{ interactionOutput.values.y }}
          </p>
        </div></div
      >
      <vic-tooltip-triangle></vic-tooltip-triangle>
    </div>
  }
</ng-template>
