<div class="bars-example" *ngIf="vm$ | async as vm; else loading">
  <p class="ui-instructions">Select a bars direction</p>
  <mat-button-toggle-group
    class="direction-toggle-group"
    [hideSingleSelectionIndicator]="true"
    [value]="(layoutProperties$ | async).orientation"
    (change)="updateOrientation($event.value)"
    ><mat-button-toggle value="horizontal">Horizontal</mat-button-toggle
    ><mat-button-toggle value="vertical">Vertical</mat-button-toggle>
  </mat-button-toggle-group>
  <vic-xy-chart [config]="vm.chartConfig">
    <ng-container svg-elements>
      <svg:g
        vic-primary-marks-bars
        [config]="vm.dataConfig"
        [vicBarsHoverMoveActions]="hoverAndMoveActions"
        (vicBarsHoverMoveOutput)="updateTooltipForNewOutput($event)"
      >
        <vic-html-tooltip
          [config]="tooltipConfig$ | async"
          [template]="htmlTooltip"
        ></vic-html-tooltip>
      </svg:g>
      @if ((layoutProperties$ | async).orientation === 'horizontal') {
        <svg:g vic-x-quantitative-axis [config]="vm.xAxisConfig" />
        <svg:g vic-y-ordinal-axis [config]="vm.yAxisConfig" />
      } @else {
        <svg:g vic-x-ordinal-axis [config]="vm.xAxisConfig" />
        <svg:g vic-y-quantitative-axis [config]="vm.yAxisConfig" />
      }
    </ng-container>
  </vic-xy-chart>
</div>

<ng-template #loading>Loading...</ng-template>

<ng-template #htmlTooltip>
  <div class="bars-example-tooltip-container">
    <div class="tooltip-content" [style.--color]="(tooltipData$ | async).color">
      @if ((layoutProperties$ | async).orientation === 'horizontal') {
        <p class="tooltip-label category">
          {{ (tooltipData$ | async).values.y }}
        </p>
        <div class="values-container">
          <p class="tooltip-label y">
            <span class="value-label">Value</span>
            {{ (tooltipData$ | async).values.x }}
          </p>
        </div>
      } @else {
        <p class="tooltip-label category">
          {{ (tooltipData$ | async).values.x }}
        </p>
        <div class="values-container">
          <p class="tooltip-label y">
            <span class="value-label">Value</span>
            {{ (tooltipData$ | async).values.y }}
          </p>
        </div>
      }
    </div>
    <svg width="100%" height="12" [style.--width]="'20px'" class="svg-triangle">
      <g class="svg-g">
        <path class="triangle-path" d="M 0,0 10,12 20,0"></path>
      </g>
    </svg>
  </div>
</ng-template>
