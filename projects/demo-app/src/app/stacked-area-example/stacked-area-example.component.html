<app-component-demo [folderName]="folderName">
  <span title>Stacked Area</span>
  <ng-container demo *ngIf="vm$ | async as vm; else loading">
    <vic-xy-chart [margin]="margin">
      <ng-container svg-elements>
        <svg:g vic-xy-background></svg:g>
        <svg:g
          vic-x-quantitative-axis
          [config]="vm.xAxisConfig"
          side="bottom"
        ></svg:g>
        <svg:g
          vic-y-quantitative-axis
          [config]="vm.yAxisConfig"
          side="left"
        ></svg:g>
        <svg:g
          vic-data-marks-stacked-area
          [config]="vm.dataConfig"
          [vicStackedAreaHoverMoveEffects]="hoverAndMoveEffects"
          (vicStackedAreaHoverMoveOutput)="updateTooltipForNewOutput($event)"
        >
          <vic-html-tooltip
            [config]="(tooltipConfig$ | async)"
            [template]="htmlTooltip"
          ></vic-html-tooltip>
        </svg:g>
        <svg:g>
          <line
            class="tooltip-line"
            [attr.x1]="(tooltipData$ | async)?.positionX"
            [attr.x2]="(tooltipData$ | async)?.positionX"
            [attr.y1]="(tooltipData$ | async)?.minPositionY"
            [attr.y2]="(tooltipData$ | async)?.maxPositionY"
          ></line>
        </svg:g>
      </ng-container>
    </vic-xy-chart>
  </ng-container>
  <ng-template #loading>Loading...</ng-template>
</app-component-demo>

<ng-template #htmlTooltip>
  <div
    *ngIf="(tooltipData$ | async) as eventOutput"
    [style.--color]="eventOutput.data[eventOutput.stratIndex].color"
    class="tooltip-container"
  >
    <p class="tooltip-label category">
      {{ eventOutput.data[eventOutput.stratIndex].category }}
    </p>
    <div class="values-container">
      <p class="tooltip-label y">
        <span class="value-label">Value</span>
        {{ eventOutput.data[eventOutput.stratIndex].datum.value }}
      </p>
    </div>
  </div>
</ng-template>
